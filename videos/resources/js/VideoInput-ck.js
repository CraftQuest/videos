/**
 * Instantiate player modal
 */var $playerModal=new PlayerModal;VideoInput=Garnish.Base.extend({$input:null,$spinner:null,$preview:null,lookupVideoTimeout:null,init:function(e){this.$input=$("#"+e);this.$container=this.$input.parents(".dkv-video");this.$spinner=this.$input.next();this.$preview=this.$spinner.next();this.addPreviewListeners();this.addListener(this.$input,"textchange","lookupVideo")},addPreviewListeners:function(){this.$image=$("img",this.$container);this.addListener(this.$image,"click","playVideo")},playVideo:function(){$playerModal.play(this.$input.val())},lookupVideo:function(){var e=this.$input.val();if(e){this.$spinner.removeClass("hidden");Craft.postActionRequest("videos/lookupVideo",{url:e},$.proxy(function(e,t){this.$spinner.addClass("hidden");if(e&&t=="success")if(!e.hasOwnProperty("error")){this.$preview.length?this.$preview.show():this.$preview=$('<div class="dkv-preview-inject"/>').insertAfter(this.$spinner);this.$preview.html(e.preview);this.addPreviewListeners()}else this.$preview.hide();else this.$preview.hide()},this))}else this.$preview.hide()}});